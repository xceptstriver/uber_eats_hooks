{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":1,"column":31}}]}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":9,"column":0},"end":{"line":12,"column":36}}]}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":9,"column":0},"end":{"line":12,"column":36}}]}},{"name":"./useOnPreventRemove","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":0},"end":{"line":13,"column":79}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnAction;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"./NavigationBuilderContext\"));\n\n  var _useOnPreventRemove = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[3], \"./useOnPreventRemove\"));\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function useOnAction(_ref) {\n    var router = _ref.router,\n        getState = _ref.getState,\n        setState = _ref.setState,\n        key = _ref.key,\n        actionListeners = _ref.actionListeners,\n        beforeRemoveListeners = _ref.beforeRemoveListeners,\n        routerConfigOptions = _ref.routerConfigOptions,\n        emitter = _ref.emitter;\n\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n        onActionParent = _React$useContext.onAction,\n        onRouteFocusParent = _React$useContext.onRouteFocus,\n        addListenerParent = _React$useContext.addListener,\n        onDispatchAction = _React$useContext.onDispatchAction;\n\n    var routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(function () {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    var onAction = React.useCallback(function (action) {\n      var visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      var state = getState();\n\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n\n      visitedNavigators.add(state.key);\n\n      if (typeof action.target !== 'string' || action.target === state.key) {\n        var result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n        result = result === null && action.target === state.key ? state : result;\n\n        if (result !== null) {\n          onDispatchAction(action, state === result);\n\n          if (state !== result) {\n            var isPrevented = (0, _useOnPreventRemove.shouldPreventRemove)(emitter, beforeRemoveListeners, state.routes, result.routes, action);\n\n            if (isPrevented) {\n              return true;\n            }\n\n            setState(result);\n          }\n\n          if (onRouteFocusParent !== undefined) {\n            var shouldFocus = router.shouldActionChangeFocus(action);\n\n            if (shouldFocus && key !== undefined) {\n              onRouteFocusParent(key);\n            }\n          }\n\n          return true;\n        }\n      }\n\n      if (onActionParent !== undefined) {\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n\n      for (var i = actionListeners.length - 1; i >= 0; i--) {\n        var listener = actionListeners[i];\n\n        if (listener(action, visitedNavigators)) {\n          return true;\n        }\n      }\n\n      return false;\n    }, [actionListeners, beforeRemoveListeners, emitter, getState, key, onActionParent, onDispatchAction, onRouteFocusParent, router, setState]);\n    (0, _useOnPreventRemove.default)({\n      getState: getState,\n      emitter: emitter,\n      beforeRemoveListeners: beforeRemoveListeners\n    });\n    React.useEffect(function () {\n      return addListenerParent == null ? void 0 : addListenerParent('action', onAction);\n    }, [addListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":102,"map":[[7,0,1,0],[9,0,9,0],[11,0,13,0],[17,0,37,15],[17,11,37,24,"useOnAction"],[17,22,37,15],[17,29,46,12],[18,0,46,12],[18,8,38,2,"router"],[18,14,46,12],[18,22,38,2,"router"],[18,28,46,12],[19,0,46,12],[19,8,39,2,"getState"],[19,16,46,12],[19,24,39,2,"getState"],[19,32,46,12],[20,0,46,12],[20,8,40,2,"setState"],[20,16,46,12],[20,24,40,2,"setState"],[20,32,46,12],[21,0,46,12],[21,8,41,2,"key"],[21,11,46,12],[21,19,41,2,"key"],[21,22,46,12],[22,0,46,12],[22,8,42,2,"actionListeners"],[22,23,46,12],[22,31,42,2,"actionListeners"],[22,46,46,12],[23,0,46,12],[23,8,43,2,"beforeRemoveListeners"],[23,29,46,12],[23,37,43,2,"beforeRemoveListeners"],[23,58,46,12],[24,0,46,12],[24,8,44,2,"routerConfigOptions"],[24,27,46,12],[24,35,44,2,"routerConfigOptions"],[24,54,46,12],[25,0,46,12],[25,8,45,2,"emitter"],[25,15,46,12],[25,23,45,2,"emitter"],[25,30,46,12],[27,0,47,2],[27,28,52,6,"React"],[27,33,52,11],[27,34,52,12,"useContext"],[27,44,52,6],[27,45,52,23,"NavigationBuilderContext"],[27,78,52,6],[27,79,47,2],[28,0,47,2],[28,8,48,14,"onActionParent"],[28,22,47,2],[28,43,48,4,"onAction"],[28,51,47,2],[29,0,47,2],[29,8,49,18,"onRouteFocusParent"],[29,26,47,2],[29,47,49,4,"onRouteFocus"],[29,59,47,2],[30,0,47,2],[30,8,50,17,"addListenerParent"],[30,25,47,2],[30,46,50,4,"addListener"],[30,57,47,2],[31,0,47,2],[31,8,51,4,"onDispatchAction"],[31,24,47,2],[31,45,51,4,"onDispatchAction"],[31,61,47,2],[33,0,54,2],[33,8,54,8,"routerConfigOptionsRef"],[33,30,54,30],[33,33,54,33,"React"],[33,38,54,38],[33,39,54,39,"useRef"],[33,45,54,33],[33,46,55,4,"routerConfigOptions"],[33,65,54,33],[33,66,54,2],[34,0,58,2,"React"],[34,4,58,2,"React"],[34,9,58,7],[34,10,58,8,"useEffect"],[34,19,58,2],[34,20,58,18],[34,32,58,24],[35,0,59,4,"routerConfigOptionsRef"],[35,6,59,4,"routerConfigOptionsRef"],[35,28,59,26],[35,29,59,27,"current"],[35,36,59,4],[35,39,59,37,"routerConfigOptions"],[35,58,59,4],[36,0,60,3],[36,5,58,2],[37,0,62,2],[37,8,62,8,"onAction"],[37,16,62,16],[37,19,62,19,"React"],[37,24,62,24],[37,25,62,25,"useCallback"],[37,36,62,19],[37,37,63,4],[37,47,64,6,"action"],[37,53,63,4],[37,55,66,9],[38,0,66,9],[38,10,65,6,"visitedNavigators"],[38,27,66,9],[38,98,65,39],[38,102,65,43,"Set"],[38,105,65,39],[38,107,66,9],[39,0,67,6],[39,10,67,12,"state"],[39,15,67,17],[39,18,67,20,"getState"],[39,26,67,28],[39,28,67,6],[41,0,71,6],[41,10,71,10,"visitedNavigators"],[41,27,71,27],[41,28,71,28,"has"],[41,31,71,10],[41,32,71,32,"state"],[41,37,71,37],[41,38,71,38,"key"],[41,41,71,10],[41,42,71,6],[41,44,71,44],[42,0,72,8],[42,15,72,15],[42,20,72,8],[43,0,73,7],[45,0,75,6,"visitedNavigators"],[45,6,75,6,"visitedNavigators"],[45,23,75,23],[45,24,75,24,"add"],[45,27,75,6],[45,28,75,28,"state"],[45,33,75,33],[45,34,75,34,"key"],[45,37,75,6],[47,0,77,6],[47,10,77,10],[47,17,77,17,"action"],[47,23,77,23],[47,24,77,24,"target"],[47,30,77,10],[47,35,77,35],[47,43,77,10],[47,47,77,47,"action"],[47,53,77,53],[47,54,77,54,"target"],[47,60,77,47],[47,65,77,65,"state"],[47,70,77,70],[47,71,77,71,"key"],[47,74,77,6],[47,76,77,76],[48,0,78,8],[48,12,78,12,"result"],[48,18,78,18],[48,21,78,21,"router"],[48,27,78,27],[48,28,78,28,"getStateForAction"],[48,45,78,21],[48,46,79,10,"state"],[48,51,78,21],[48,53,80,10,"action"],[48,59,78,21],[48,61,81,10,"routerConfigOptionsRef"],[48,83,81,32],[48,84,81,33,"current"],[48,91,78,21],[48,92,78,8],[49,0,86,8,"result"],[49,8,86,8,"result"],[49,14,86,14],[49,17,87,10,"result"],[49,23,87,16],[49,28,87,21],[49,32,87,10],[49,36,87,29,"action"],[49,42,87,35],[49,43,87,36,"target"],[49,49,87,29],[49,54,87,47,"state"],[49,59,87,52],[49,60,87,53,"key"],[49,63,87,10],[49,66,87,59,"state"],[49,71,87,10],[49,74,87,67,"result"],[49,80,86,8],[51,0,89,8],[51,12,89,12,"result"],[51,18,89,18],[51,23,89,23],[51,27,89,8],[51,29,89,29],[52,0,90,10,"onDispatchAction"],[52,10,90,10,"onDispatchAction"],[52,26,90,26],[52,27,90,27,"action"],[52,33,90,26],[52,35,90,35,"state"],[52,40,90,40],[52,45,90,45,"result"],[52,51,90,26],[52,52,90,10],[54,0,92,10],[54,14,92,14,"state"],[54,19,92,19],[54,24,92,24,"result"],[54,30,92,10],[54,32,92,32],[55,0,93,12],[55,16,93,18,"isPrevented"],[55,27,93,29],[55,30,93,32],[55,75,94,14,"emitter"],[55,82,93,32],[55,84,95,14,"beforeRemoveListeners"],[55,105,93,32],[55,107,96,14,"state"],[55,112,96,19],[55,113,96,20,"routes"],[55,119,93,32],[55,121,97,14,"result"],[55,127,97,20],[55,128,97,21,"routes"],[55,134,93,32],[55,136,98,14,"action"],[55,142,93,32],[55,143,93,12],[57,0,101,12],[57,16,101,16,"isPrevented"],[57,27,101,12],[57,29,101,29],[58,0,102,14],[58,21,102,21],[58,25,102,14],[59,0,103,13],[61,0,105,12,"setState"],[61,12,105,12,"setState"],[61,20,105,20],[61,21,105,21,"result"],[61,27,105,20],[61,28,105,12],[62,0,106,11],[64,0,108,10],[64,14,108,14,"onRouteFocusParent"],[64,32,108,32],[64,37,108,37,"undefined"],[64,46,108,10],[64,48,108,48],[65,0,111,12],[65,16,111,18,"shouldFocus"],[65,27,111,29],[65,30,111,32,"router"],[65,36,111,38],[65,37,111,39,"shouldActionChangeFocus"],[65,60,111,32],[65,61,111,63,"action"],[65,67,111,32],[65,68,111,12],[67,0,113,12],[67,16,113,16,"shouldFocus"],[67,27,113,27],[67,31,113,31,"key"],[67,34,113,34],[67,39,113,39,"undefined"],[67,48,113,12],[67,50,113,50],[68,0,114,14,"onRouteFocusParent"],[68,14,114,14,"onRouteFocusParent"],[68,32,114,32],[68,33,114,33,"key"],[68,36,114,32],[68,37,114,14],[69,0,115,13],[70,0,116,11],[72,0,118,10],[72,17,118,17],[72,21,118,10],[73,0,119,9],[74,0,120,7],[76,0,122,6],[76,10,122,10,"onActionParent"],[76,24,122,24],[76,29,122,29,"undefined"],[76,38,122,6],[76,40,122,40],[77,0,124,8],[77,12,124,12,"onActionParent"],[77,26,124,26],[77,27,124,27,"action"],[77,33,124,26],[77,35,124,35,"visitedNavigators"],[77,52,124,26],[77,53,124,8],[77,55,124,55],[78,0,125,10],[78,17,125,17],[78,21,125,10],[79,0,126,9],[80,0,127,7],[82,0,130,6],[82,11,130,11],[82,15,130,15,"i"],[82,16,130,16],[82,19,130,19,"actionListeners"],[82,34,130,34],[82,35,130,35,"length"],[82,41,130,19],[82,44,130,44],[82,45,130,6],[82,47,130,47,"i"],[82,48,130,48],[82,52,130,52],[82,53,130,6],[82,55,130,55,"i"],[82,56,130,56],[82,58,130,6],[82,60,130,60],[83,0,131,8],[83,12,131,14,"listener"],[83,20,131,22],[83,23,131,25,"actionListeners"],[83,38,131,40],[83,39,131,41,"i"],[83,40,131,40],[83,41,131,8],[85,0,133,8],[85,12,133,12,"listener"],[85,20,133,20],[85,21,133,21,"action"],[85,27,133,20],[85,29,133,29,"visitedNavigators"],[85,46,133,20],[85,47,133,8],[85,49,133,49],[86,0,134,10],[86,17,134,17],[86,21,134,10],[87,0,135,9],[88,0,136,7],[90,0,138,6],[90,13,138,13],[90,18,138,6],[91,0,139,5],[91,5,62,19],[91,7,140,4],[91,8,141,6,"actionListeners"],[91,23,140,4],[91,25,142,6,"beforeRemoveListeners"],[91,46,140,4],[91,48,143,6,"emitter"],[91,55,140,4],[91,57,144,6,"getState"],[91,65,140,4],[91,67,145,6,"key"],[91,70,140,4],[91,72,146,6,"onActionParent"],[91,86,140,4],[91,88,147,6,"onDispatchAction"],[91,104,140,4],[91,106,148,6,"onRouteFocusParent"],[91,124,140,4],[91,126,149,6,"router"],[91,132,140,4],[91,134,150,6,"setState"],[91,142,140,4],[91,143,62,19],[91,144,62,2],[92,0,154,2],[92,37,154,21],[93,0,155,4,"getState"],[93,6,155,4,"getState"],[93,14,155,12],[93,16,155,4,"getState"],[93,24,154,21],[94,0,156,4,"emitter"],[94,6,156,4,"emitter"],[94,13,156,11],[94,15,156,4,"emitter"],[94,22,154,21],[95,0,157,4,"beforeRemoveListeners"],[95,6,157,4,"beforeRemoveListeners"],[95,27,157,25],[95,29,157,4,"beforeRemoveListeners"],[96,0,154,21],[96,5,154,2],[97,0,160,2,"React"],[97,4,160,2,"React"],[97,9,160,7],[97,10,160,8,"useEffect"],[97,19,160,2],[97,20,160,18],[98,0,160,18],[98,13,160,24,"addListenerParent"],[98,30,160,18],[98,50,160,24,"addListenerParent"],[98,67,160,41],[98,68,160,44],[98,76,160,41],[98,78,160,54,"onAction"],[98,86,160,41],[98,87,160,18],[99,0,160,18],[99,5,160,2],[99,7,160,65],[99,8,161,4,"addListenerParent"],[99,25,160,65],[99,27,162,4,"onAction"],[99,35,160,65],[99,36,160,2],[100,0,165,2],[100,11,165,9,"onAction"],[100,19,165,2],[101,0,166,1]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","React.useCallback$argument_0"],"mappings":"AAA;eCoC;kBCqB;GDE;IEG;KF4E;kBCqB,6CD;CDM"}},"type":"js/module"}]}