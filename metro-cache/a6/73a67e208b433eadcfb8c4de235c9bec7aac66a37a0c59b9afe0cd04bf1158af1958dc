{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":99,"column":0}},{"start":{"line":1,"column":0},"end":{"line":99,"column":0}},{"start":{"line":6,"column":0},"end":{"line":8,"column":36}},{"start":{"line":9,"column":0},"end":{"line":9,"column":62}}]}},{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":99,"column":0}}]}},{"name":"@babel/runtime/helpers/extends","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":99,"column":0}}]}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":1,"column":31}}]}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":0},"end":{"line":8,"column":36}}]}},{"name":"./NavigationRouteContext","data":{"asyncType":null,"locs":[{"start":{"line":9,"column":0},"end":{"line":9,"column":62}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnPreventRemove;\n  exports.shouldPreventRemove = void 0;\n\n  var _defineProperty2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _extends3 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/extends\"));\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[3], \"react\"));\n\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[4], \"./NavigationBuilderContext\"));\n\n  var _NavigationRouteContext = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[5], \"./NavigationRouteContext\"));\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n\n  var shouldPreventRemove = function shouldPreventRemove(emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var _action$VISITED_ROUTE;\n\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys = (_action$VISITED_ROUTE = action[VISITED_ROUTE_KEYS]) != null ? _action$VISITED_ROUTE : new Set();\n    var beforeRemoveAction = (0, _extends3.default)({}, action, (0, _defineProperty2.default)({}, VISITED_ROUTE_KEYS, visitedRouteKeys));\n\n    for (var _iterator = _createForOfIteratorHelperLoose(removedRoutes), _step; !(_step = _iterator()).done;) {\n      var _beforeRemoveListener;\n\n      var route = _step.value;\n\n      if (visitedRouteKeys.has(route.key)) {\n        continue;\n      }\n\n      var isPrevented = (_beforeRemoveListener = beforeRemoveListeners[route.key]) == null ? void 0 : _beforeRemoveListener.call(beforeRemoveListeners, beforeRemoveAction);\n\n      if (isPrevented) {\n        return true;\n      }\n\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  exports.shouldPreventRemove = shouldPreventRemove;\n\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n        emitter = _ref.emitter,\n        beforeRemoveListeners = _ref.beforeRemoveListeners;\n\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n        addKeyedListener = _React$useContext.addKeyedListener;\n\n    var route = React.useContext(_NavigationRouteContext.default);\n    var routeKey = route == null ? void 0 : route.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener == null ? void 0 : addKeyedListener('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":96,"map":[[12,0,1,0],[14,0,6,0],[16,0,9,0],[28,0,19,0],[28,6,19,6,"VISITED_ROUTE_KEYS"],[28,24,19,24],[28,27,19,27,"Symbol"],[28,33,19,33],[28,34,19,34],[28,54,19,33],[28,55,19,0],[30,0,21,7],[30,6,21,13,"shouldPreventRemove"],[30,25,21,32],[30,28,21,35],[30,37,21,13,"shouldPreventRemove"],[30,56,21,35],[30,57,22,2,"emitter"],[30,64,21,35],[30,66,23,2,"beforeRemoveListeners"],[30,87,21,35],[30,89,24,2,"currentRoutes"],[30,102,21,35],[30,104,25,2,"nextRoutes"],[30,114,21,35],[30,116,26,2,"action"],[30,122,21,35],[30,124,27,5],[31,0,27,5],[33,0,28,2],[33,8,28,8,"nextRouteKeys"],[33,21,28,21],[33,24,28,24,"nextRoutes"],[33,34,28,34],[33,35,28,35,"map"],[33,38,28,24],[33,39,28,39],[33,49,28,40,"route"],[33,54,28,39],[34,0,28,39],[34,13,28,50,"route"],[34,18,28,55],[34,19,28,56,"key"],[34,22,28,39],[35,0,28,39],[35,5,28,24],[35,6,28,2],[36,0,31,2],[36,8,31,8,"removedRoutes"],[36,21,31,21],[36,24,31,24,"currentRoutes"],[36,37,31,37],[36,38,32,5,"filter"],[36,44,31,24],[36,45,32,12],[36,55,32,13,"route"],[36,60,32,12],[37,0,32,12],[37,13,32,23],[37,14,32,24,"nextRouteKeys"],[37,27,32,37],[37,28,32,38,"includes"],[37,36,32,24],[37,37,32,47,"route"],[37,42,32,52],[37,43,32,53,"key"],[37,46,32,24],[37,47,32,12],[38,0,32,12],[38,5,31,24],[38,7,33,5,"reverse"],[38,14,31,24],[38,16,31,2],[39,0,35,2],[39,8,35,8,"visitedRouteKeys"],[39,24,35,37],[39,52,37,4,"action"],[39,58,37,10],[39,59,37,11,"VISITED_ROUTE_KEYS"],[39,77,37,10],[39,78,35,37],[39,114,37,34],[39,118,37,38,"Set"],[39,121,37,34],[39,123,35,2],[40,0,39,2],[40,8,39,8,"beforeRemoveAction"],[40,26,39,26],[40,56,40,7,"action"],[40,62,39,26],[40,98,41,5,"VISITED_ROUTE_KEYS"],[40,116,39,26],[40,118,41,26,"visitedRouteKeys"],[40,134,39,26],[40,136,39,2],[42,0,44,2],[42,57,44,22,"removedRoutes"],[42,70,44,2],[42,110,44,37],[43,0,44,37],[45,0,44,37],[45,10,44,13,"route"],[45,15,44,37],[47,0,45,4],[47,10,45,8,"visitedRouteKeys"],[47,26,45,24],[47,27,45,25,"has"],[47,30,45,8],[47,31,45,29,"route"],[47,36,45,34],[47,37,45,35,"key"],[47,40,45,8],[47,41,45,4],[47,43,45,41],[48,0,47,6],[49,0,48,5],[51,0,51,4],[51,10,51,10,"isPrevented"],[51,21,51,21],[51,49,51,24,"beforeRemoveListeners"],[51,70,51,45],[51,71,51,46,"route"],[51,76,51,51],[51,77,51,52,"key"],[51,80,51,45],[51,81,51,21],[51,102,51,24],[51,129,51,24,"beforeRemoveListeners"],[51,150,51,45],[51,152,51,59,"beforeRemoveAction"],[51,170,51,45],[51,171,51,4],[53,0,53,4],[53,10,53,8,"isPrevented"],[53,21,53,4],[53,23,53,21],[54,0,54,6],[54,15,54,13],[54,19,54,6],[55,0,55,5],[57,0,57,4,"visitedRouteKeys"],[57,6,57,4,"visitedRouteKeys"],[57,22,57,20],[57,23,57,21,"add"],[57,26,57,4],[57,27,57,25,"route"],[57,32,57,30],[57,33,57,31,"key"],[57,36,57,4],[58,0,59,4],[58,10,59,10,"event"],[58,15,59,15],[58,18,59,18,"emitter"],[58,25,59,25],[58,26,59,26,"emit"],[58,30,59,18],[58,31,59,31],[59,0,60,6,"type"],[59,8,60,6,"type"],[59,12,60,10],[59,14,60,12],[59,28,59,31],[60,0,61,6,"target"],[60,8,61,6,"target"],[60,14,61,12],[60,16,61,14,"route"],[60,21,61,19],[60,22,61,20,"key"],[60,25,59,31],[61,0,62,6,"data"],[61,8,62,6,"data"],[61,12,62,10],[61,14,62,12],[62,0,62,14,"action"],[62,10,62,14,"action"],[62,16,62,20],[62,18,62,22,"beforeRemoveAction"],[63,0,62,12],[63,9,59,31],[64,0,63,6,"canPreventDefault"],[64,8,63,6,"canPreventDefault"],[64,25,63,23],[64,27,63,25],[65,0,59,31],[65,7,59,18],[65,8,59,4],[67,0,66,4],[67,10,66,8,"event"],[67,15,66,13],[67,16,66,14,"defaultPrevented"],[67,32,66,4],[67,34,66,32],[68,0,67,6],[68,15,67,13],[68,19,67,6],[69,0,68,5],[70,0,69,3],[72,0,71,2],[72,11,71,9],[72,16,71,2],[73,0,72,1],[73,3,21,7],[77,0,74,15],[77,11,74,24,"useOnPreventRemove"],[77,29,74,15],[77,36,78,12],[78,0,78,12],[78,8,75,2,"getState"],[78,16,78,12],[78,24,75,2,"getState"],[78,32,78,12],[79,0,78,12],[79,8,76,2,"emitter"],[79,15,78,12],[79,23,76,2,"emitter"],[79,30,78,12],[80,0,78,12],[80,8,77,2,"beforeRemoveListeners"],[80,29,78,12],[80,37,77,2,"beforeRemoveListeners"],[80,58,78,12],[82,0,79,2],[82,28,79,31,"React"],[82,33,79,36],[82,34,79,37,"useContext"],[82,44,79,31],[82,45,79,48,"NavigationBuilderContext"],[82,78,79,31],[82,79,79,2],[83,0,79,2],[83,8,79,10,"addKeyedListener"],[83,24,79,2],[83,45,79,10,"addKeyedListener"],[83,61,79,2],[85,0,80,2],[85,8,80,8,"route"],[85,13,80,13],[85,16,80,16,"React"],[85,21,80,21],[85,22,80,22,"useContext"],[85,32,80,16],[85,33,80,33,"NavigationRouteContext"],[85,64,80,16],[85,65,80,2],[86,0,81,2],[86,8,81,8,"routeKey"],[86,16,81,16],[86,19,81,19,"route"],[86,24,81,16],[86,44,81,19,"route"],[86,49,81,24],[86,50,81,26,"key"],[86,53,81,2],[87,0,83,2,"React"],[87,4,83,2,"React"],[87,9,83,7],[87,10,83,8,"useEffect"],[87,19,83,2],[87,20,83,18],[87,32,83,24],[88,0,84,4],[88,10,84,8,"routeKey"],[88,18,84,4],[88,20,84,18],[89,0,85,6],[89,15,85,13,"addKeyedListener"],[89,31,85,6],[89,51,85,13,"addKeyedListener"],[89,67,85,29],[89,68,85,32],[89,82,85,29],[89,84,85,48,"routeKey"],[89,92,85,29],[89,94,85,58],[89,104,85,59,"action"],[89,110,85,58],[89,112,85,70],[90,0,86,8],[90,14,86,14,"state"],[90,19,86,19],[90,22,86,22,"getState"],[90,30,86,30],[90,32,86,8],[91,0,88,8],[91,17,88,15,"shouldPreventRemove"],[91,36,88,34],[91,37,89,10,"emitter"],[91,44,88,34],[91,46,90,10,"beforeRemoveListeners"],[91,67,88,34],[91,69,91,10,"state"],[91,74,91,15],[91,75,91,16,"routes"],[91,81,88,34],[91,83,92,10],[91,85,88,34],[91,87,93,10,"action"],[91,93,88,34],[91,94,88,8],[92,0,95,7],[92,9,85,29],[92,10,85,6],[93,0,96,5],[94,0,97,3],[94,5,83,2],[94,7,97,5],[94,8,97,6,"addKeyedListener"],[94,24,97,5],[94,26,97,24,"beforeRemoveListeners"],[94,47,97,5],[94,49,97,47,"emitter"],[94,56,97,5],[94,58,97,56,"getState"],[94,66,97,5],[94,68,97,66,"routeKey"],[94,76,97,5],[94,77,83,2],[95,0,98,1]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;mCCoB;uCCO,oBD;YEI,6CF;CDwC;eIE;kBCS;0DCE;ODU;GDE;CJC"}},"type":"js/module"}]}