{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":135,"column":0}},{"start":{"line":1,"column":0},"end":{"line":135,"column":0}},{"start":{"line":19,"column":0},"end":{"line":19,"column":70}},{"start":{"line":20,"column":0},"end":{"line":20,"column":68}}]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":135,"column":0}}]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":135,"column":0}}]}},{"name":"./FirestoreDocumentReference","data":{"asyncType":null,"locs":[{"start":{"line":19,"column":0},"end":{"line":19,"column":70}}]}},{"name":"./FirestoreDocumentSnapshot","data":{"asyncType":null,"locs":[{"start":{"line":20,"column":0},"end":{"line":20,"column":68}}]}},{"name":"@react-native-firebase/app/lib/common","data":{"asyncType":null,"locs":[{"start":{"line":70,"column":9},"end":{"line":70,"column":17},"identifierName":"isObject"}]}},{"name":"./utils","data":{"asyncType":null,"locs":[{"start":{"line":78,"column":19},"end":{"line":78,"column":34},"identifierName":"parseSetOptions"},{"start":{"line":104,"column":13},"end":{"line":104,"column":28},"identifierName":"parseUpdateArgs"}],"isOptional":true}},{"name":"./utils/serialize","data":{"asyncType":null,"locs":[{"start":{"line":88,"column":12},"end":{"line":88,"column":26},"identifierName":"buildNativeMap"},{"start":{"line":114,"column":12},"end":{"line":114,"column":26},"identifierName":"buildNativeMap"}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var _FirestoreDocumentReference = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"./FirestoreDocumentReference\"));\n\n  var _FirestoreDocumentSnapshot = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[4], \"./FirestoreDocumentSnapshot\"));\n\n  var FirestoreTransaction = function () {\n    function FirestoreTransaction(firestore, meta) {\n      (0, _classCallCheck2.default)(this, FirestoreTransaction);\n      this._firestore = firestore;\n      this._meta = meta;\n    }\n\n    (0, _createClass2.default)(FirestoreTransaction, [{\n      key: \"_prepare\",\n      value: function _prepare() {\n        this._calledGetCount = 0;\n        this._commandBuffer = [];\n        this._pendingResult = undefined;\n      }\n    }, {\n      key: \"get\",\n      value: function get(documentRef) {\n        var _this = this;\n\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.get(*) 'documentRef' expected a DocumentReference.\");\n        }\n\n        this._calledGetCount++;\n        return this._firestore.native.transactionGetDocument(this._meta.id, documentRef.path).then(function (data) {\n          return new _FirestoreDocumentSnapshot.default(_this._firestore, data);\n        });\n      }\n    }, {\n      key: \"set\",\n      value: function set(documentRef, data, options) {\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.set(*) 'documentRef' expected a DocumentReference.\");\n        }\n\n        if (!(0, _$$_REQUIRE(_dependencyMap[5], \"@react-native-firebase/app/lib/common\").isObject)(data)) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.set(_, *) 'data' must be an object..\");\n        }\n\n        var setOptions;\n\n        try {\n          setOptions = (0, _$$_REQUIRE(_dependencyMap[6], \"./utils\").parseSetOptions)(options);\n        } catch (e) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.set(_, _, *) \" + e.message + \".\");\n        }\n\n        this._commandBuffer.push({\n          type: 'SET',\n          path: documentRef.path,\n          data: (0, _$$_REQUIRE(_dependencyMap[7], \"./utils/serialize\").buildNativeMap)(data, this._firestore._settings.ignoreUndefinedProperties),\n          options: setOptions\n        });\n\n        return this;\n      }\n    }, {\n      key: \"update\",\n      value: function update(documentRef) {\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.update(*) 'documentRef' expected a DocumentReference.\");\n        }\n\n        var data;\n\n        try {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          data = (0, _$$_REQUIRE(_dependencyMap[6], \"./utils\").parseUpdateArgs)(args);\n        } catch (e) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.update(_, *) \" + e.message);\n        }\n\n        this._commandBuffer.push({\n          type: 'UPDATE',\n          path: documentRef.path,\n          data: (0, _$$_REQUIRE(_dependencyMap[7], \"./utils/serialize\").buildNativeMap)(data, this._firestore._settings.ignoreUndefinedProperties)\n        });\n\n        return this;\n      }\n    }, {\n      key: \"delete\",\n      value: function _delete(documentRef) {\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore().runTransaction() Transaction.delete(*) 'documentRef' expected a DocumentReference.\");\n        }\n\n        this._commandBuffer.push({\n          type: 'DELETE',\n          path: documentRef.path\n        });\n\n        return this;\n      }\n    }]);\n    return FirestoreTransaction;\n  }();\n\n  exports.default = FirestoreTransaction;\n});","lineCount":117,"map":[[11,0,19,0],[13,0,20,0],[15,6,24,21,"FirestoreTransaction"],[15,26],[16,0,25,2],[16,34,25,14,"firestore"],[16,43,25,2],[16,45,25,25,"meta"],[16,49,25,2],[16,51,25,31],[17,0,25,31],[18,0,26,4],[18,11,26,9,"_firestore"],[18,21,26,4],[18,24,26,22,"firestore"],[18,33,26,4],[19,0,27,4],[19,11,27,9,"_meta"],[19,16,27,4],[19,19,27,17,"meta"],[19,23,27,4],[20,0,28,3],[24,13,36,2],[24,33,36,13],[25,0,37,4],[25,13,37,9,"_calledGetCount"],[25,28,37,4],[25,31,37,27],[25,32,37,4],[26,0,38,4],[26,13,38,9,"_commandBuffer"],[26,27,38,4],[26,30,38,26],[26,32,38,4],[27,0,39,4],[27,13,39,9,"_pendingResult"],[27,27,39,4],[27,30,39,26,"undefined"],[27,39,39,4],[28,0,40,3],[31,13,45,2],[31,26,45,6,"documentRef"],[31,37,45,2],[31,39,45,19],[32,0,45,19],[34,0,46,4],[34,12,46,8],[34,14,46,10,"documentRef"],[34,25,46,21],[34,37,46,33,"FirestoreDocumentReference"],[34,72,46,8],[34,73,46,4],[34,75,46,62],[35,0,47,6],[35,16,47,12],[35,20,47,16,"Error"],[35,25,47,12],[35,26,48,8],[35,128,47,12],[35,129,47,6],[36,0,50,5],[38,0,52,4],[38,13,52,9,"_calledGetCount"],[38,28,52,4],[39,0,53,4],[39,15,53,11],[39,20,53,16,"_firestore"],[39,30,53,11],[39,31,53,27,"native"],[39,37,53,11],[39,38,54,7,"transactionGetDocument"],[39,60,53,11],[39,61,54,30],[39,66,54,35,"_meta"],[39,71,54,30],[39,72,54,41,"id"],[39,74,53,11],[39,76,54,45,"documentRef"],[39,87,54,56],[39,88,54,57,"path"],[39,92,53,11],[39,94,55,7,"then"],[39,98,53,11],[39,99,55,12],[39,109,55,12,"data"],[39,113,55,16],[40,0,55,16],[40,17,55,20],[40,21,55,24,"FirestoreDocumentSnapshot"],[40,55,55,20],[40,56,55,50],[40,61,55,54],[40,62,55,55,"_firestore"],[40,72,55,20],[40,74,55,67,"data"],[40,78,55,20],[40,79,55,16],[41,0,55,16],[41,9,53,11],[41,10,53,4],[42,0,56,3],[45,13,63,2],[45,26,63,6,"documentRef"],[45,37,63,2],[45,39,63,19,"data"],[45,43,63,2],[45,45,63,25,"options"],[45,52,63,2],[45,54,63,34],[46,0,64,4],[46,12,64,8],[46,14,64,10,"documentRef"],[46,25,64,21],[46,37,64,33,"FirestoreDocumentReference"],[46,72,64,8],[46,73,64,4],[46,75,64,62],[47,0,65,6],[47,16,65,12],[47,20,65,16,"Error"],[47,25,65,12],[47,26,66,8],[47,128,65,12],[47,129,65,6],[48,0,68,5],[50,0,70,4],[50,12,70,8],[50,13,70,9],[50,99,70,18,"data"],[50,103,70,9],[50,104,70,4],[50,106,70,25],[51,0,71,6],[51,16,71,12],[51,20,71,16,"Error"],[51,25,71,12],[51,26,72,8],[51,114,71,12],[51,115,71,6],[52,0,74,5],[54,0,76,4],[54,12,76,8,"setOptions"],[54,22,76,4],[56,0,77,4],[56,12,77,8],[57,0,78,6,"setOptions"],[57,10,78,6,"setOptions"],[57,20,78,16],[57,23,78,19],[57,86,78,35,"options"],[57,93,78,19],[57,94,78,6],[58,0,79,5],[58,9,77,4],[58,10,79,6],[58,17,79,13,"e"],[58,18,79,6],[58,20,79,16],[59,0,80,6],[59,16,80,12],[59,20,80,16,"Error"],[59,25,80,12],[59,94,81,74,"e"],[59,95,81,75],[59,96,81,76,"message"],[59,103,80,12],[59,110,80,6],[60,0,83,5],[62,0,85,4],[62,13,85,9,"_commandBuffer"],[62,27,85,4],[62,28,85,24,"push"],[62,32,85,4],[62,33,85,29],[63,0,86,6,"type"],[63,10,86,6,"type"],[63,14,86,10],[63,16,86,12],[63,21,85,29],[64,0,87,6,"path"],[64,10,87,6,"path"],[64,14,87,10],[64,16,87,12,"documentRef"],[64,27,87,23],[64,28,87,24,"path"],[64,32,85,29],[65,0,88,6,"data"],[65,10,88,6,"data"],[65,14,88,10],[65,16,88,12],[65,88,88,27,"data"],[65,92,88,12],[65,94,88,33],[65,99,88,38,"_firestore"],[65,109,88,33],[65,110,88,49,"_settings"],[65,119,88,33],[65,120,88,59,"ignoreUndefinedProperties"],[65,145,88,12],[65,146,85,29],[66,0,89,6,"options"],[66,10,89,6,"options"],[66,17,89,13],[66,19,89,15,"setOptions"],[67,0,85,29],[67,9,85,4],[69,0,92,4],[69,15,92,11],[69,19,92,4],[70,0,93,3],[73,13,95,2],[73,29,95,9,"documentRef"],[73,40,95,2],[73,42,95,31],[74,0,96,4],[74,12,96,8],[74,14,96,10,"documentRef"],[74,25,96,21],[74,37,96,33,"FirestoreDocumentReference"],[74,72,96,8],[74,73,96,4],[74,75,96,62],[75,0,97,6],[75,16,97,12],[75,20,97,16,"Error"],[75,25,97,12],[75,26,98,8],[75,131,97,12],[75,132,97,6],[76,0,100,5],[78,0,102,4],[78,12,102,8,"data"],[78,16,102,4],[80,0,103,4],[80,12,103,8],[81,0,103,8],[81,44,95,25,"args"],[81,48,103,8],[82,0,95,25,"args"],[82,12,95,25,"args"],[82,16,103,8],[83,0,103,8],[85,0,104,6,"data"],[85,10,104,6,"data"],[85,14,104,10],[85,17,104,13],[85,80,104,29,"args"],[85,84,104,13],[85,85,104,6],[86,0,105,5],[86,9,103,4],[86,10,105,6],[86,17,105,13,"e"],[86,18,105,6],[86,20,105,16],[87,0,106,6],[87,16,106,12],[87,20,106,16,"Error"],[87,25,106,12],[87,94,107,74,"e"],[87,95,107,75],[87,96,107,76,"message"],[87,103,106,12],[87,104,106,6],[88,0,109,5],[90,0,111,4],[90,13,111,9,"_commandBuffer"],[90,27,111,4],[90,28,111,24,"push"],[90,32,111,4],[90,33,111,29],[91,0,112,6,"type"],[91,10,112,6,"type"],[91,14,112,10],[91,16,112,12],[91,24,111,29],[92,0,113,6,"path"],[92,10,113,6,"path"],[92,14,113,10],[92,16,113,12,"documentRef"],[92,27,113,23],[92,28,113,24,"path"],[92,32,111,29],[93,0,114,6,"data"],[93,10,114,6,"data"],[93,14,114,10],[93,16,114,12],[93,88,114,27,"data"],[93,92,114,12],[93,94,114,33],[93,99,114,38,"_firestore"],[93,109,114,33],[93,110,114,49,"_settings"],[93,119,114,33],[93,120,114,59,"ignoreUndefinedProperties"],[93,145,114,12],[94,0,111,29],[94,9,111,4],[96,0,117,4],[96,15,117,11],[96,19,117,4],[97,0,118,3],[100,13,120,2],[100,30,120,9,"documentRef"],[100,41,120,2],[100,43,120,22],[101,0,121,4],[101,12,121,8],[101,14,121,10,"documentRef"],[101,25,121,21],[101,37,121,33,"FirestoreDocumentReference"],[101,72,121,8],[101,73,121,4],[101,75,121,62],[102,0,122,6],[102,16,122,12],[102,20,122,16,"Error"],[102,25,122,12],[102,26,123,8],[102,131,122,12],[102,132,122,6],[103,0,125,5],[105,0,127,4],[105,13,127,9,"_commandBuffer"],[105,27,127,4],[105,28,127,24,"push"],[105,32,127,4],[105,33,127,29],[106,0,128,6,"type"],[106,10,128,6,"type"],[106,14,128,10],[106,16,128,12],[106,24,127,29],[107,0,129,6,"path"],[107,10,129,6,"path"],[107,14,129,10],[107,16,129,12,"documentRef"],[107,27,129,23],[107,28,129,24,"path"],[108,0,127,29],[108,9,127,4],[110,0,132,4],[110,15,132,11],[110,19,132,4],[111,0,133,3]],"functionMap":{"names":["<global>","FirestoreTransaction","constructor","_prepare","get","_firestore.native.transactionGetDocument.then$argument_0","set","update","_delete"],"mappings":"AAA;eCuB;ECC;GDG;EEQ;GFI;EGK;YCU,4DD;GHC;EKO;GL8B;EME;GNuB;EOE;GPa;CDC"}},"type":"js/module"}]}