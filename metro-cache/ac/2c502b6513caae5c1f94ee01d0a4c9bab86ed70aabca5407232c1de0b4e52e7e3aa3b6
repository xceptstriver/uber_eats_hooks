{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":140,"column":0}},{"start":{"line":1,"column":0},"end":{"line":140,"column":0}},{"start":{"line":19,"column":0},"end":{"line":19,"column":70}}]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":140,"column":0}}]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":140,"column":0}}]}},{"name":"./FirestoreDocumentReference","data":{"asyncType":null,"locs":[{"start":{"line":19,"column":0},"end":{"line":19,"column":70}}]}},{"name":"@react-native-firebase/app/lib/common","data":{"asyncType":null,"locs":[{"start":{"line":83,"column":9},"end":{"line":83,"column":17},"identifierName":"isObject"}]}},{"name":"./utils","data":{"asyncType":null,"locs":[{"start":{"line":89,"column":19},"end":{"line":89,"column":34},"identifierName":"parseSetOptions"},{"start":{"line":126,"column":13},"end":{"line":126,"column":28},"identifierName":"parseUpdateArgs"}],"isOptional":true}},{"name":"./utils/serialize","data":{"asyncType":null,"locs":[{"start":{"line":97,"column":12},"end":{"line":97,"column":26},"identifierName":"buildNativeMap"},{"start":{"line":134,"column":12},"end":{"line":134,"column":26},"identifierName":"buildNativeMap"}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var _FirestoreDocumentReference = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"./FirestoreDocumentReference\"));\n\n  var FirestoreWriteBatch = function () {\n    function FirestoreWriteBatch(firestore) {\n      (0, _classCallCheck2.default)(this, FirestoreWriteBatch);\n      this._firestore = firestore;\n      this._writes = [];\n      this._committed = false;\n    }\n\n    (0, _createClass2.default)(FirestoreWriteBatch, [{\n      key: \"_verifyNotCommitted\",\n      value: function _verifyNotCommitted(method) {\n        if (this._committed) {\n          throw new Error(\"firebase.firestore.batch().\" + method + \"(*) A write batch can no longer be used after commit() has been called.\");\n        }\n      }\n    }, {\n      key: \"commit\",\n      value: function commit() {\n        this._verifyNotCommitted('commit');\n\n        this._committed = true;\n\n        if (this._writes.length === 0) {\n          return Promise.resolve();\n        }\n\n        return this._firestore.native.documentBatch(this._writes);\n      }\n    }, {\n      key: \"delete\",\n      value: function _delete(documentRef) {\n        this._verifyNotCommitted('delete');\n\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore.batch().delete(*) 'documentRef' expected instance of a DocumentReference.\");\n        }\n\n        if (documentRef.firestore.app !== this._firestore.app) {\n          throw new Error(\"firebase.firestore.batch().delete(*) 'documentRef' provided DocumentReference is from a different Firestore instance.\");\n        }\n\n        this._writes.push({\n          path: documentRef.path,\n          type: 'DELETE'\n        });\n\n        return this;\n      }\n    }, {\n      key: \"set\",\n      value: function set(documentRef, data, options) {\n        this._verifyNotCommitted('set');\n\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore.batch().set(*) 'documentRef' expected instance of a DocumentReference.\");\n        }\n\n        if (documentRef.firestore.app !== this._firestore.app) {\n          throw new Error(\"firebase.firestore.batch().set(*) 'documentRef' provided DocumentReference is from a different Firestore instance.\");\n        }\n\n        if (!(0, _$$_REQUIRE(_dependencyMap[4], \"@react-native-firebase/app/lib/common\").isObject)(data)) {\n          throw new Error(\"firebase.firestore.batch().set(_, *) 'data' must be an object.\");\n        }\n\n        var setOptions;\n\n        try {\n          setOptions = (0, _$$_REQUIRE(_dependencyMap[5], \"./utils\").parseSetOptions)(options);\n        } catch (e) {\n          throw new Error(\"firebase.firestore().doc().set(_, *) \" + e.message + \".\");\n        }\n\n        this._writes.push({\n          path: documentRef.path,\n          type: 'SET',\n          data: (0, _$$_REQUIRE(_dependencyMap[6], \"./utils/serialize\").buildNativeMap)(data, this._firestore._settings.ignoreUndefinedProperties),\n          options: setOptions\n        });\n\n        return this;\n      }\n    }, {\n      key: \"update\",\n      value: function update(documentRef) {\n        this._verifyNotCommitted('update');\n\n        if (!(documentRef instanceof _FirestoreDocumentReference.default)) {\n          throw new Error(\"firebase.firestore.batch().update(*) 'documentRef' expected instance of a DocumentReference.\");\n        }\n\n        if (documentRef.firestore.app !== this._firestore.app) {\n          throw new Error(\"firebase.firestore.batch().update(*) 'documentRef' provided DocumentReference is from a different Firestore instance.\");\n        }\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        if (args.length === 0) {\n          throw new Error('firebase.firestore.batch().update(_, *) Invalid arguments. Expected update object or list of key/value pairs.');\n        }\n\n        var data;\n\n        try {\n          data = (0, _$$_REQUIRE(_dependencyMap[5], \"./utils\").parseUpdateArgs)(args);\n        } catch (e) {\n          throw new Error(\"firebase.firestore().batch().update(_, *) \" + e.message);\n        }\n\n        this._writes.push({\n          path: documentRef.path,\n          type: 'UPDATE',\n          data: (0, _$$_REQUIRE(_dependencyMap[6], \"./utils/serialize\").buildNativeMap)(data, this._firestore._settings.ignoreUndefinedProperties)\n        });\n\n        return this;\n      }\n    }]);\n    return FirestoreWriteBatch;\n  }();\n\n  exports.default = FirestoreWriteBatch;\n});","lineCount":137,"map":[[11,0,19,0],[13,6,23,21,"FirestoreWriteBatch"],[13,25],[14,0,24,2],[14,33,24,14,"firestore"],[14,42,24,2],[14,44,24,25],[15,0,24,25],[16,0,25,4],[16,11,25,9,"_firestore"],[16,21,25,4],[16,24,25,22,"firestore"],[16,33,25,4],[17,0,26,4],[17,11,26,9,"_writes"],[17,18,26,4],[17,21,26,19],[17,23,26,4],[18,0,27,4],[18,11,27,9,"_committed"],[18,21,27,4],[18,24,27,22],[18,29,27,4],[19,0,28,3],[23,13,30,2],[23,42,30,22,"method"],[23,48,30,2],[23,50,30,30],[24,0,31,4],[24,12,31,8],[24,17,31,13,"_committed"],[24,27,31,4],[24,29,31,25],[25,0,32,6],[25,16,32,12],[25,20,32,16,"Error"],[25,25,32,12],[25,58,33,38,"method"],[25,64,32,12],[25,141,32,6],[26,0,35,5],[27,0,36,3],[30,13,38,2],[30,31,38,11],[31,0,39,4],[31,13,39,9,"_verifyNotCommitted"],[31,32,39,4],[31,33,39,29],[31,41,39,4],[33,0,40,4],[33,13,40,9,"_committed"],[33,23,40,4],[33,26,40,22],[33,30,40,4],[35,0,41,4],[35,12,41,8],[35,17,41,13,"_writes"],[35,24,41,8],[35,25,41,21,"length"],[35,31,41,8],[35,36,41,32],[35,37,41,4],[35,39,41,35],[36,0,42,6],[36,17,42,13,"Promise"],[36,24,42,20],[36,25,42,21,"resolve"],[36,32,42,13],[36,34,42,6],[37,0,43,5],[39,0,44,4],[39,15,44,11],[39,20,44,16,"_firestore"],[39,30,44,11],[39,31,44,27,"native"],[39,37,44,11],[39,38,44,34,"documentBatch"],[39,51,44,11],[39,52,44,48],[39,57,44,53,"_writes"],[39,64,44,11],[39,65,44,4],[40,0,45,3],[43,13,47,2],[43,30,47,9,"documentRef"],[43,41,47,2],[43,43,47,22],[44,0,48,4],[44,13,48,9,"_verifyNotCommitted"],[44,32,48,4],[44,33,48,29],[44,41,48,4],[46,0,49,4],[46,12,49,8],[46,14,49,10,"documentRef"],[46,25,49,21],[46,37,49,33,"FirestoreDocumentReference"],[46,72,49,8],[46,73,49,4],[46,75,49,62],[47,0,50,6],[47,16,50,12],[47,20,50,16,"Error"],[47,25,50,12],[47,26,51,8],[47,120,50,12],[47,121,50,6],[48,0,53,5],[50,0,55,4],[50,12,55,8,"documentRef"],[50,23,55,19],[50,24,55,20,"firestore"],[50,33,55,8],[50,34,55,30,"app"],[50,37,55,8],[50,42,55,38],[50,47,55,43,"_firestore"],[50,57,55,38],[50,58,55,54,"app"],[50,61,55,4],[50,63,55,59],[51,0,56,6],[51,16,56,12],[51,20,56,16,"Error"],[51,25,56,12],[51,26,57,8],[51,145,56,12],[51,146,56,6],[52,0,59,5],[54,0,61,4],[54,13,61,9,"_writes"],[54,20,61,4],[54,21,61,17,"push"],[54,25,61,4],[54,26,61,22],[55,0,62,6,"path"],[55,10,62,6,"path"],[55,14,62,10],[55,16,62,12,"documentRef"],[55,27,62,23],[55,28,62,24,"path"],[55,32,61,22],[56,0,63,6,"type"],[56,10,63,6,"type"],[56,14,63,10],[56,16,63,12],[57,0,61,22],[57,9,61,4],[59,0,66,4],[59,15,66,11],[59,19,66,4],[60,0,67,3],[63,13,69,2],[63,26,69,6,"documentRef"],[63,37,69,2],[63,39,69,19,"data"],[63,43,69,2],[63,45,69,25,"options"],[63,52,69,2],[63,54,69,34],[64,0,70,4],[64,13,70,9,"_verifyNotCommitted"],[64,32,70,4],[64,33,70,29],[64,38,70,4],[66,0,71,4],[66,12,71,8],[66,14,71,10,"documentRef"],[66,25,71,21],[66,37,71,33,"FirestoreDocumentReference"],[66,72,71,8],[66,73,71,4],[66,75,71,62],[67,0,72,6],[67,16,72,12],[67,20,72,16,"Error"],[67,25,72,12],[67,26,73,8],[67,117,72,12],[67,118,72,6],[68,0,75,5],[70,0,77,4],[70,12,77,8,"documentRef"],[70,23,77,19],[70,24,77,20,"firestore"],[70,33,77,8],[70,34,77,30,"app"],[70,37,77,8],[70,42,77,38],[70,47,77,43,"_firestore"],[70,57,77,38],[70,58,77,54,"app"],[70,61,77,4],[70,63,77,59],[71,0,78,6],[71,16,78,12],[71,20,78,16,"Error"],[71,25,78,12],[71,26,79,8],[71,142,78,12],[71,143,78,6],[72,0,81,5],[74,0,83,4],[74,12,83,8],[74,13,83,9],[74,99,83,18,"data"],[74,103,83,9],[74,104,83,4],[74,106,83,25],[75,0,84,6],[75,16,84,12],[75,20,84,16,"Error"],[75,25,84,12],[75,26,84,22],[75,90,84,12],[75,91,84,6],[76,0,85,5],[78,0,87,4],[78,12,87,8,"setOptions"],[78,22,87,4],[80,0,88,4],[80,12,88,8],[81,0,89,6,"setOptions"],[81,10,89,6,"setOptions"],[81,20,89,16],[81,23,89,19],[81,86,89,35,"options"],[81,93,89,19],[81,94,89,6],[82,0,90,5],[82,9,88,4],[82,10,90,6],[82,17,90,13,"e"],[82,18,90,6],[82,20,90,16],[83,0,91,6],[83,16,91,12],[83,20,91,16,"Error"],[83,25,91,12],[83,68,91,62,"e"],[83,69,91,63],[83,70,91,64,"message"],[83,77,91,12],[83,84,91,6],[84,0,92,5],[86,0,94,4],[86,13,94,9,"_writes"],[86,20,94,4],[86,21,94,17,"push"],[86,25,94,4],[86,26,94,22],[87,0,95,6,"path"],[87,10,95,6,"path"],[87,14,95,10],[87,16,95,12,"documentRef"],[87,27,95,23],[87,28,95,24,"path"],[87,32,94,22],[88,0,96,6,"type"],[88,10,96,6,"type"],[88,14,96,10],[88,16,96,12],[88,21,94,22],[89,0,97,6,"data"],[89,10,97,6,"data"],[89,14,97,10],[89,16,97,12],[89,88,97,27,"data"],[89,92,97,12],[89,94,97,33],[89,99,97,38,"_firestore"],[89,109,97,33],[89,110,97,49,"_settings"],[89,119,97,33],[89,120,97,59,"ignoreUndefinedProperties"],[89,145,97,12],[89,146,94,22],[90,0,98,6,"options"],[90,10,98,6,"options"],[90,17,98,13],[90,19,98,15,"setOptions"],[91,0,94,22],[91,9,94,4],[93,0,101,4],[93,15,101,11],[93,19,101,4],[94,0,102,3],[97,13,104,2],[97,29,104,9,"documentRef"],[97,40,104,2],[97,42,104,31],[98,0,105,4],[98,13,105,9,"_verifyNotCommitted"],[98,32,105,4],[98,33,105,29],[98,41,105,4],[100,0,106,4],[100,12,106,8],[100,14,106,10,"documentRef"],[100,25,106,21],[100,37,106,33,"FirestoreDocumentReference"],[100,72,106,8],[100,73,106,4],[100,75,106,62],[101,0,107,6],[101,16,107,12],[101,20,107,16,"Error"],[101,25,107,12],[101,26,108,8],[101,120,107,12],[101,121,107,6],[102,0,110,5],[104,0,112,4],[104,12,112,8,"documentRef"],[104,23,112,19],[104,24,112,20,"firestore"],[104,33,112,8],[104,34,112,30,"app"],[104,37,112,8],[104,42,112,38],[104,47,112,43,"_firestore"],[104,57,112,38],[104,58,112,54,"app"],[104,61,112,4],[104,63,112,59],[105,0,113,6],[105,16,113,12],[105,20,113,16,"Error"],[105,25,113,12],[105,26,114,8],[105,145,113,12],[105,146,113,6],[106,0,116,5],[108,0,104,31],[108,42,104,25,"args"],[108,46,104,31],[109,0,104,25,"args"],[109,10,104,25,"args"],[109,14,104,31],[110,0,104,31],[112,0,118,4],[112,12,118,8,"args"],[112,16,118,12],[112,17,118,13,"length"],[112,23,118,8],[112,28,118,24],[112,29,118,4],[112,31,118,27],[113,0,119,6],[113,16,119,12],[113,20,119,16,"Error"],[113,25,119,12],[113,26,120,8],[113,137,119,12],[113,138,119,6],[114,0,122,5],[116,0,124,4],[116,12,124,8,"data"],[116,16,124,4],[118,0,125,4],[118,12,125,8],[119,0,126,6,"data"],[119,10,126,6,"data"],[119,14,126,10],[119,17,126,13],[119,80,126,29,"args"],[119,84,126,13],[119,85,126,6],[120,0,127,5],[120,9,125,4],[120,10,127,6],[120,17,127,13,"e"],[120,18,127,6],[120,20,127,16],[121,0,128,6],[121,16,128,12],[121,20,128,16,"Error"],[121,25,128,12],[121,73,128,67,"e"],[121,74,128,68],[121,75,128,69,"message"],[121,82,128,12],[121,83,128,6],[122,0,129,5],[124,0,131,4],[124,13,131,9,"_writes"],[124,20,131,4],[124,21,131,17,"push"],[124,25,131,4],[124,26,131,22],[125,0,132,6,"path"],[125,10,132,6,"path"],[125,14,132,10],[125,16,132,12,"documentRef"],[125,27,132,23],[125,28,132,24,"path"],[125,32,131,22],[126,0,133,6,"type"],[126,10,133,6,"type"],[126,14,133,10],[126,16,133,12],[126,24,131,22],[127,0,134,6,"data"],[127,10,134,6,"data"],[127,14,134,10],[127,16,134,12],[127,88,134,27,"data"],[127,92,134,12],[127,94,134,33],[127,99,134,38,"_firestore"],[127,109,134,33],[127,110,134,49,"_settings"],[127,119,134,33],[127,120,134,59,"ignoreUndefinedProperties"],[127,145,134,12],[128,0,131,22],[128,9,131,4],[130,0,137,4],[130,15,137,11],[130,19,137,4],[131,0,138,3]],"functionMap":{"names":["<global>","FirestoreWriteBatch","constructor","_verifyNotCommitted","commit","_delete","set","update"],"mappings":"AAA;eCsB;ECC;GDI;EEE;GFM;EGE;GHO;EIE;GJoB;EKE;GLiC;EME;GNkC;CDC"}},"type":"js/module"}]}