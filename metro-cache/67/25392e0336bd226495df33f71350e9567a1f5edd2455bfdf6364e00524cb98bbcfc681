{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":1,"column":31}}]}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0},"end":{"line":3,"column":62}},{"start":{"line":4,"column":0},"end":{"line":4,"column":66}}]}},{"name":"./NavigationStateContext","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0},"end":{"line":3,"column":62}}]}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0},"end":{"line":4,"column":66}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOptionsGetters;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n\n  var _NavigationStateContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"./NavigationStateContext\"));\n\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"./NavigationBuilderContext\"));\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function useOptionsGetters(_ref) {\n    var key = _ref.key,\n        options = _ref.options,\n        navigation = _ref.navigation;\n    var optionsRef = React.useRef(options);\n    var optionsGettersFromChildRef = React.useRef({});\n\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n        onOptionsChange = _React$useContext.onOptionsChange;\n\n    var _React$useContext2 = React.useContext(_NavigationStateContext.default),\n        parentAddOptionsGetter = _React$useContext2.addOptionsGetter;\n\n    var optionsChangeListener = React.useCallback(function () {\n      var _navigation$isFocused;\n\n      var isFocused = (_navigation$isFocused = navigation == null ? void 0 : navigation.isFocused()) != null ? _navigation$isFocused : true;\n      var hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n\n      if (isFocused && !hasChildren) {\n        var _optionsRef$current;\n\n        onOptionsChange((_optionsRef$current = optionsRef.current) != null ? _optionsRef$current : {});\n      }\n    }, [navigation, onOptionsChange]);\n    React.useEffect(function () {\n      optionsRef.current = options;\n      optionsChangeListener();\n      return navigation == null ? void 0 : navigation.addListener('focus', optionsChangeListener);\n    }, [navigation, options, optionsChangeListener]);\n    var getOptionsFromListener = React.useCallback(function () {\n      for (var _key in optionsGettersFromChildRef.current) {\n        if (optionsGettersFromChildRef.current.hasOwnProperty(_key)) {\n          var _optionsGettersFromCh, _optionsGettersFromCh2;\n\n          var result = (_optionsGettersFromCh = (_optionsGettersFromCh2 = optionsGettersFromChildRef.current)[_key]) == null ? void 0 : _optionsGettersFromCh.call(_optionsGettersFromCh2);\n\n          if (result !== null) {\n            return result;\n          }\n        }\n      }\n\n      return null;\n    }, []);\n    var getCurrentOptions = React.useCallback(function () {\n      var _navigation$isFocused2;\n\n      var isFocused = (_navigation$isFocused2 = navigation == null ? void 0 : navigation.isFocused()) != null ? _navigation$isFocused2 : true;\n\n      if (!isFocused) {\n        return null;\n      }\n\n      var optionsFromListener = getOptionsFromListener();\n\n      if (optionsFromListener !== null) {\n        return optionsFromListener;\n      }\n\n      return optionsRef.current;\n    }, [navigation, getOptionsFromListener]);\n    React.useEffect(function () {\n      return parentAddOptionsGetter == null ? void 0 : parentAddOptionsGetter(key, getCurrentOptions);\n    }, [getCurrentOptions, parentAddOptionsGetter, key]);\n    var addOptionsGetter = React.useCallback(function (key, getter) {\n      optionsGettersFromChildRef.current[key] = getter;\n      optionsChangeListener();\n      return function () {\n        delete optionsGettersFromChildRef.current[key];\n        optionsChangeListener();\n      };\n    }, [optionsChangeListener]);\n    return {\n      addOptionsGetter: addOptionsGetter,\n      getCurrentOptions: getCurrentOptions\n    };\n  }\n});","lineCount":95,"map":[[7,0,1,0],[9,0,3,0],[11,0,4,0],[17,0,13,15],[17,11,13,24,"useOptionsGetters"],[17,28,13,15],[17,35,17,12],[18,0,17,12],[18,8,14,2,"key"],[18,11,17,12],[18,19,14,2,"key"],[18,22,17,12],[19,0,17,12],[19,8,15,2,"options"],[19,15,17,12],[19,23,15,2,"options"],[19,30,17,12],[20,0,17,12],[20,8,16,2,"navigation"],[20,18,17,12],[20,26,16,2,"navigation"],[20,36,17,12],[21,0,18,2],[21,8,18,8,"optionsRef"],[21,18,18,18],[21,21,18,21,"React"],[21,26,18,26],[21,27,18,27,"useRef"],[21,33,18,21],[21,34,18,54,"options"],[21,41,18,21],[21,42,18,2],[22,0,19,2],[22,8,19,8,"optionsGettersFromChildRef"],[22,34,19,34],[22,37,19,37,"React"],[22,42,19,42],[22,43,19,43,"useRef"],[22,49,19,37],[22,50,21,4],[22,52,19,37],[22,53,19,2],[24,0,23,2],[24,28,23,30,"React"],[24,33,23,35],[24,34,23,36,"useContext"],[24,44,23,30],[24,45,23,47,"NavigationBuilderContext"],[24,78,23,30],[24,79,23,2],[25,0,23,2],[25,8,23,10,"onOptionsChange"],[25,23,23,2],[25,44,23,10,"onOptionsChange"],[25,59,23,2],[27,0,24,2],[27,29,24,55,"React"],[27,34,24,60],[27,35,24,61,"useContext"],[27,45,24,55],[27,46,25,4,"NavigationStateContext"],[27,77,24,55],[27,78,24,2],[28,0,24,2],[28,8,24,28,"parentAddOptionsGetter"],[28,30,24,2],[28,52,24,10,"addOptionsGetter"],[28,68,24,2],[30,0,28,2],[30,8,28,8,"optionsChangeListener"],[30,29,28,29],[30,32,28,32,"React"],[30,37,28,37],[30,38,28,38,"useCallback"],[30,49,28,32],[30,50,28,50],[30,62,28,56],[31,0,28,56],[33,0,29,4],[33,10,29,10,"isFocused"],[33,19,29,19],[33,47,29,22,"navigation"],[33,57,29,19],[33,77,29,22,"navigation"],[33,87,29,32],[33,88,29,34,"isFocused"],[33,97,29,22],[33,99,29,19],[33,135,29,49],[33,139,29,4],[34,0,30,4],[34,10,30,10,"hasChildren"],[34,21,30,21],[34,24,30,24,"Object"],[34,30,30,30],[34,31,30,31,"keys"],[34,35,30,24],[34,36,30,36,"optionsGettersFromChildRef"],[34,62,30,62],[34,63,30,63,"current"],[34,70,30,24],[34,72,30,72,"length"],[34,78,30,4],[36,0,32,4],[36,10,32,8,"isFocused"],[36,19,32,17],[36,23,32,21],[36,24,32,22,"hasChildren"],[36,35,32,4],[36,37,32,35],[37,0,32,35],[39,0,33,6,"onOptionsChange"],[39,8,33,6,"onOptionsChange"],[39,23,33,21],[39,47,33,22,"optionsRef"],[39,57,33,32],[39,58,33,33,"current"],[39,65,33,21],[39,99,33,44],[39,101,33,21],[39,102,33,6],[40,0,34,5],[41,0,35,3],[41,5,28,32],[41,7,35,5],[41,8,35,6,"navigation"],[41,18,35,5],[41,20,35,18,"onOptionsChange"],[41,35,35,5],[41,36,28,32],[41,37,28,2],[42,0,37,2,"React"],[42,4,37,2,"React"],[42,9,37,7],[42,10,37,8,"useEffect"],[42,19,37,2],[42,20,37,18],[42,32,37,24],[43,0,38,4,"optionsRef"],[43,6,38,4,"optionsRef"],[43,16,38,14],[43,17,38,15,"current"],[43,24,38,4],[43,27,38,25,"options"],[43,34,38,4],[44,0,39,4,"optionsChangeListener"],[44,6,39,4,"optionsChangeListener"],[44,27,39,25],[45,0,41,4],[45,13,41,11,"navigation"],[45,23,41,4],[45,43,41,11,"navigation"],[45,53,41,21],[45,54,41,23,"addListener"],[45,65,41,11],[45,66,41,35],[45,73,41,11],[45,75,41,44,"optionsChangeListener"],[45,96,41,11],[45,97,41,4],[46,0,42,3],[46,5,37,2],[46,7,42,5],[46,8,42,6,"navigation"],[46,18,42,5],[46,20,42,18,"options"],[46,27,42,5],[46,29,42,27,"optionsChangeListener"],[46,50,42,5],[46,51,37,2],[47,0,44,2],[47,8,44,8,"getOptionsFromListener"],[47,30,44,30],[47,33,44,33,"React"],[47,38,44,38],[47,39,44,39,"useCallback"],[47,50,44,33],[47,51,44,51],[47,63,44,57],[48,0,45,4],[48,11,45,9],[48,15,45,13,"key"],[48,19,45,4],[48,23,45,20,"optionsGettersFromChildRef"],[48,49,45,46],[48,50,45,47,"current"],[48,57,45,4],[48,59,45,56],[49,0,46,6],[49,12,46,10,"optionsGettersFromChildRef"],[49,38,46,36],[49,39,46,37,"current"],[49,46,46,10],[49,47,46,45,"hasOwnProperty"],[49,61,46,10],[49,62,46,60,"key"],[49,66,46,10],[49,67,46,6],[49,69,46,66],[50,0,46,66],[52,0,47,8],[52,14,47,14,"result"],[52,20,47,20],[52,48,47,23],[52,74,47,23,"optionsGettersFromChildRef"],[52,100,47,49],[52,101,47,50,"current"],[52,108,47,23],[52,110,47,58,"key"],[52,114,47,23],[52,115,47,20],[52,136,47,23],[52,186,47,8],[54,0,50,8],[54,14,50,12,"result"],[54,20,50,18],[54,25,50,23],[54,29,50,8],[54,31,50,29],[55,0,51,10],[55,19,51,17,"result"],[55,25,51,10],[56,0,52,9],[57,0,53,7],[58,0,54,5],[60,0,56,4],[60,13,56,11],[60,17,56,4],[61,0,57,3],[61,5,44,33],[61,7,57,5],[61,9,44,33],[61,10,44,2],[62,0,59,2],[62,8,59,8,"getCurrentOptions"],[62,25,59,25],[62,28,59,28,"React"],[62,33,59,33],[62,34,59,34,"useCallback"],[62,45,59,28],[62,46,59,46],[62,58,59,52],[63,0,59,52],[65,0,60,4],[65,10,60,10,"isFocused"],[65,19,60,19],[65,48,60,22,"navigation"],[65,58,60,19],[65,78,60,22,"navigation"],[65,88,60,32],[65,89,60,34,"isFocused"],[65,98,60,22],[65,100,60,19],[65,137,60,49],[65,141,60,4],[67,0,62,4],[67,10,62,8],[67,11,62,9,"isFocused"],[67,20,62,4],[67,22,62,20],[68,0,63,6],[68,15,63,13],[68,19,63,6],[69,0,64,5],[71,0,66,4],[71,10,66,10,"optionsFromListener"],[71,29,66,29],[71,32,66,32,"getOptionsFromListener"],[71,54,66,54],[71,56,66,4],[73,0,68,4],[73,10,68,8,"optionsFromListener"],[73,29,68,27],[73,34,68,32],[73,38,68,4],[73,40,68,38],[74,0,69,6],[74,15,69,13,"optionsFromListener"],[74,34,69,6],[75,0,70,5],[77,0,72,4],[77,13,72,11,"optionsRef"],[77,23,72,21],[77,24,72,22,"current"],[77,31,72,4],[78,0,73,3],[78,5,59,28],[78,7,73,5],[78,8,73,6,"navigation"],[78,18,73,5],[78,20,73,18,"getOptionsFromListener"],[78,42,73,5],[78,43,59,28],[78,44,59,2],[79,0,75,2,"React"],[79,4,75,2,"React"],[79,9,75,7],[79,10,75,8,"useEffect"],[79,19,75,2],[79,20,75,18],[79,32,75,24],[80,0,76,4],[80,13,76,11,"parentAddOptionsGetter"],[80,35,76,4],[80,55,76,11,"parentAddOptionsGetter"],[80,77,76,33],[80,78,76,36,"key"],[80,81,76,33],[80,83,76,42,"getCurrentOptions"],[80,100,76,33],[80,101,76,4],[81,0,77,3],[81,5,75,2],[81,7,77,5],[81,8,77,6,"getCurrentOptions"],[81,25,77,5],[81,27,77,25,"parentAddOptionsGetter"],[81,49,77,5],[81,51,77,49,"key"],[81,54,77,5],[81,55,75,2],[82,0,79,2],[82,8,79,8,"addOptionsGetter"],[82,24,79,24],[82,27,79,27,"React"],[82,32,79,32],[82,33,79,33,"useCallback"],[82,44,79,27],[82,45,80,4],[82,55,80,5,"key"],[82,58,80,4],[82,60,80,18,"getter"],[82,66,80,4],[82,68,80,62],[83,0,81,6,"optionsGettersFromChildRef"],[83,6,81,6,"optionsGettersFromChildRef"],[83,32,81,32],[83,33,81,33,"current"],[83,40,81,6],[83,41,81,41,"key"],[83,44,81,6],[83,48,81,48,"getter"],[83,54,81,6],[84,0,82,6,"optionsChangeListener"],[84,6,82,6,"optionsChangeListener"],[84,27,82,27],[85,0,84,6],[85,13,84,13],[85,25,84,19],[86,0,86,8],[86,15,86,15,"optionsGettersFromChildRef"],[86,41,86,41],[86,42,86,42,"current"],[86,49,86,15],[86,50,86,50,"key"],[86,53,86,15],[86,54,86,8],[87,0,87,8,"optionsChangeListener"],[87,8,87,8,"optionsChangeListener"],[87,29,87,29],[88,0,88,7],[88,7,84,6],[89,0,89,5],[89,5,79,27],[89,7,90,4],[89,8,90,5,"optionsChangeListener"],[89,29,90,4],[89,30,79,27],[89,31,79,2],[90,0,93,2],[90,11,93,9],[91,0,94,4,"addOptionsGetter"],[91,6,94,4,"addOptionsGetter"],[91,22,94,20],[91,24,94,4,"addOptionsGetter"],[91,40,93,9],[92,0,95,4,"getCurrentOptions"],[92,6,95,4,"getCurrentOptions"],[92,23,95,21],[92,25,95,4,"getCurrentOptions"],[93,0,93,9],[93,5,93,2],[94,0,97,1]],"functionMap":{"names":["<global>","useOptionsGetters","React.useCallback$argument_0","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;eCY;kDCe;GDO;kBEE;GFK;mDCE;GDa;8CCE;GDc;kBEE;GFE;ICG;aEI;OFI;KDC;CDQ"}},"type":"js/module"}]}