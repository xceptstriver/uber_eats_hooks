{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":1,"column":31}}]}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0},"end":{"line":3,"column":52}}]}},{"name":"./NavigationContext","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0},"end":{"line":3,"column":52}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useFocusEvents;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n\n  var _NavigationContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"./NavigationContext\"));\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function useFocusEvents(_ref) {\n    var state = _ref.state,\n        emitter = _ref.emitter;\n    var navigation = React.useContext(_NavigationContext.default);\n    var lastFocusedKeyRef = React.useRef();\n    var currentFocusedKey = state.routes[state.index].key;\n    React.useEffect(function () {\n      return navigation == null ? void 0 : navigation.addListener('focus', function () {\n        lastFocusedKeyRef.current = currentFocusedKey;\n        emitter.emit({\n          type: 'focus',\n          target: currentFocusedKey\n        });\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n    React.useEffect(function () {\n      return navigation == null ? void 0 : navigation.addListener('blur', function () {\n        lastFocusedKeyRef.current = undefined;\n        emitter.emit({\n          type: 'blur',\n          target: currentFocusedKey\n        });\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n    React.useEffect(function () {\n      var lastFocusedKey = lastFocusedKeyRef.current;\n      lastFocusedKeyRef.current = currentFocusedKey;\n\n      if (lastFocusedKey === undefined && !navigation) {\n        emitter.emit({\n          type: 'focus',\n          target: currentFocusedKey\n        });\n      }\n\n      if (lastFocusedKey === currentFocusedKey || !(navigation ? navigation.isFocused() : true)) {\n        return;\n      }\n\n      if (lastFocusedKey === undefined) {\n        return;\n      }\n\n      emitter.emit({\n        type: 'blur',\n        target: lastFocusedKey\n      });\n      emitter.emit({\n        type: 'focus',\n        target: currentFocusedKey\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n  }\n});","lineCount":68,"map":[[7,0,1,0],[9,0,3,0],[15,0,15,15],[15,11,15,24,"useFocusEvents"],[15,25,15,15],[15,32,18,19],[16,0,18,19],[16,8,16,2,"state"],[16,13,18,19],[16,21,16,2,"state"],[16,26,18,19],[17,0,18,19],[17,8,17,2,"emitter"],[17,15,18,19],[17,23,17,2,"emitter"],[17,30,18,19],[18,0,19,2],[18,8,19,8,"navigation"],[18,18,19,18],[18,21,19,21,"React"],[18,26,19,26],[18,27,19,27,"useContext"],[18,37,19,21],[18,38,19,38,"NavigationContext"],[18,64,19,21],[18,65,19,2],[19,0,20,2],[19,8,20,8,"lastFocusedKeyRef"],[19,25,20,25],[19,28,20,28,"React"],[19,33,20,33],[19,34,20,34,"useRef"],[19,40,20,28],[19,42,20,2],[20,0,22,2],[20,8,22,8,"currentFocusedKey"],[20,25,22,25],[20,28,22,28,"state"],[20,33,22,33],[20,34,22,34,"routes"],[20,40,22,28],[20,41,22,41,"state"],[20,46,22,46],[20,47,22,47,"index"],[20,52,22,28],[20,54,22,54,"key"],[20,57,22,2],[21,0,26,2,"React"],[21,4,26,2,"React"],[21,9,26,7],[21,10,26,8,"useEffect"],[21,19,26,2],[21,20,27,4],[22,0,27,4],[22,13,28,6,"navigation"],[22,23,27,4],[22,43,28,6,"navigation"],[22,53,28,16],[22,54,28,18,"addListener"],[22,65,28,6],[22,66,28,30],[22,73,28,6],[22,75,28,39],[22,87,28,45],[23,0,29,8,"lastFocusedKeyRef"],[23,8,29,8,"lastFocusedKeyRef"],[23,25,29,25],[23,26,29,26,"current"],[23,33,29,8],[23,36,29,36,"currentFocusedKey"],[23,53,29,8],[24,0,30,8,"emitter"],[24,8,30,8,"emitter"],[24,15,30,15],[24,16,30,16,"emit"],[24,20,30,8],[24,21,30,21],[25,0,30,23,"type"],[25,10,30,23,"type"],[25,14,30,27],[25,16,30,29],[25,23,30,21],[26,0,30,38,"target"],[26,10,30,38,"target"],[26,16,30,44],[26,18,30,46,"currentFocusedKey"],[27,0,30,21],[27,9,30,8],[28,0,31,7],[28,7,28,6],[28,8,27,4],[29,0,27,4],[29,5,26,2],[29,7,32,4],[29,8,32,5,"currentFocusedKey"],[29,25,32,4],[29,27,32,24,"emitter"],[29,34,32,4],[29,36,32,33,"navigation"],[29,46,32,4],[29,47,26,2],[30,0,35,2,"React"],[30,4,35,2,"React"],[30,9,35,7],[30,10,35,8,"useEffect"],[30,19,35,2],[30,20,36,4],[31,0,36,4],[31,13,37,6,"navigation"],[31,23,36,4],[31,43,37,6,"navigation"],[31,53,37,16],[31,54,37,18,"addListener"],[31,65,37,6],[31,66,37,30],[31,72,37,6],[31,74,37,38],[31,86,37,44],[32,0,38,8,"lastFocusedKeyRef"],[32,8,38,8,"lastFocusedKeyRef"],[32,25,38,25],[32,26,38,26,"current"],[32,33,38,8],[32,36,38,36,"undefined"],[32,45,38,8],[33,0,39,8,"emitter"],[33,8,39,8,"emitter"],[33,15,39,15],[33,16,39,16,"emit"],[33,20,39,8],[33,21,39,21],[34,0,39,23,"type"],[34,10,39,23,"type"],[34,14,39,27],[34,16,39,29],[34,22,39,21],[35,0,39,37,"target"],[35,10,39,37,"target"],[35,16,39,43],[35,18,39,45,"currentFocusedKey"],[36,0,39,21],[36,9,39,8],[37,0,40,7],[37,7,37,6],[37,8,36,4],[38,0,36,4],[38,5,35,2],[38,7,41,4],[38,8,41,5,"currentFocusedKey"],[38,25,41,4],[38,27,41,24,"emitter"],[38,34,41,4],[38,36,41,33,"navigation"],[38,46,41,4],[38,47,35,2],[39,0,44,2,"React"],[39,4,44,2,"React"],[39,9,44,7],[39,10,44,8,"useEffect"],[39,19,44,2],[39,20,44,18],[39,32,44,24],[40,0,45,4],[40,10,45,10,"lastFocusedKey"],[40,24,45,24],[40,27,45,27,"lastFocusedKeyRef"],[40,44,45,44],[40,45,45,45,"current"],[40,52,45,4],[41,0,47,4,"lastFocusedKeyRef"],[41,6,47,4,"lastFocusedKeyRef"],[41,23,47,21],[41,24,47,22,"current"],[41,31,47,4],[41,34,47,32,"currentFocusedKey"],[41,51,47,4],[43,0,51,4],[43,10,51,8,"lastFocusedKey"],[43,24,51,22],[43,29,51,27,"undefined"],[43,38,51,8],[43,42,51,40],[43,43,51,41,"navigation"],[43,53,51,4],[43,55,51,53],[44,0,52,6,"emitter"],[44,8,52,6,"emitter"],[44,15,52,13],[44,16,52,14,"emit"],[44,20,52,6],[44,21,52,19],[45,0,52,21,"type"],[45,10,52,21,"type"],[45,14,52,25],[45,16,52,27],[45,23,52,19],[46,0,52,36,"target"],[46,10,52,36,"target"],[46,16,52,42],[46,18,52,44,"currentFocusedKey"],[47,0,52,19],[47,9,52,6],[48,0,53,5],[50,0,57,4],[50,10,58,6,"lastFocusedKey"],[50,24,58,20],[50,29,58,25,"currentFocusedKey"],[50,46,58,6],[50,50,59,6],[50,52,59,8,"navigation"],[50,62,59,18],[50,65,59,21,"navigation"],[50,75,59,31],[50,76,59,32,"isFocused"],[50,85,59,21],[50,87,59,18],[50,90,59,46],[50,94,59,6],[50,95,57,4],[50,97,60,6],[51,0,61,6],[52,0,62,5],[54,0,64,4],[54,10,64,8,"lastFocusedKey"],[54,24,64,22],[54,29,64,27,"undefined"],[54,38,64,4],[54,40,64,38],[55,0,66,6],[56,0,67,5],[58,0,69,4,"emitter"],[58,6,69,4,"emitter"],[58,13,69,11],[58,14,69,12,"emit"],[58,18,69,4],[58,19,69,17],[59,0,69,19,"type"],[59,8,69,19,"type"],[59,12,69,23],[59,14,69,25],[59,20,69,17],[60,0,69,33,"target"],[60,8,69,33,"target"],[60,14,69,39],[60,16,69,41,"lastFocusedKey"],[61,0,69,17],[61,7,69,4],[62,0,70,4,"emitter"],[62,6,70,4,"emitter"],[62,13,70,11],[62,14,70,12,"emit"],[62,18,70,4],[62,19,70,17],[63,0,70,19,"type"],[63,8,70,19,"type"],[63,12,70,23],[63,14,70,25],[63,21,70,17],[64,0,70,34,"target"],[64,8,70,34,"target"],[64,14,70,40],[64,16,70,42,"currentFocusedKey"],[65,0,70,17],[65,7,70,4],[66,0,71,3],[66,5,44,2],[66,7,71,5],[66,8,71,6,"currentFocusedKey"],[66,25,71,5],[66,27,71,25,"emitter"],[66,34,71,5],[66,36,71,34,"navigation"],[66,46,71,5],[66,47,44,2],[67,0,72,1]],"functionMap":{"names":["<global>","useFocusEvents","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;eCc;ICY;uCCC;ODG,CD;ICK;sCCC;ODG,CD;kBCI;GD2B;CDC"}},"type":"js/module"}]}