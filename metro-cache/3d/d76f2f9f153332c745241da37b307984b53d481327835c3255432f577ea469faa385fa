{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":183,"column":0}},{"start":{"line":1,"column":0},"end":{"line":183,"column":0}},{"start":{"line":1,"column":0},"end":{"line":183,"column":0}},{"start":{"line":17,"column":0},"end":{"line":17,"column":50}},{"start":{"line":18,"column":0},"end":{"line":18,"column":34}}]}},{"name":"@babel/runtime/helpers/extends","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":183,"column":0}}]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":183,"column":0}}]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":183,"column":0}}]}},{"name":"./NativeBlobModule","data":{"asyncType":null,"locs":[{"start":{"line":17,"column":0},"end":{"line":17,"column":50}}]}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":18,"column":0},"end":{"line":18,"column":34}}]}},{"name":"./Blob","data":{"asyncType":null,"locs":[{"start":{"line":78,"column":10},"end":{"line":78,"column":30}},{"start":{"line":115,"column":39},"end":{"line":115,"column":53}}]}},{"name":"./BlobRegistry","data":{"asyncType":null,"locs":[{"start":{"line":114,"column":4},"end":{"line":114,"column":25}},{"start":{"line":135,"column":4},"end":{"line":135,"column":27}},{"start":{"line":136,"column":8},"end":{"line":136,"column":24}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _extends2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/extends\"));\n\n  var _classCallCheck2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  var _NativeBlobModule = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[4], \"./NativeBlobModule\"));\n\n  var _invariant = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[5], \"invariant\"));\n\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n          v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n\n  var BlobManager = function () {\n    function BlobManager() {\n      (0, _classCallCheck2.default)(this, BlobManager);\n    }\n\n    (0, _createClass2.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || global.ArrayBufferView && part instanceof global.ArrayBufferView) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n\n          if (part instanceof _$$_REQUIRE(_dependencyMap[6], \"./Blob\")) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n\n        _NativeBlobModule.default.createFromParts(items, blobId);\n\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        _$$_REQUIRE(_dependencyMap[7], \"./BlobRegistry\").register(options.blobId);\n\n        return (0, _extends2.default)(Object.create(_$$_REQUIRE(_dependencyMap[6], \"./Blob\").prototype), {\n          data: options.__collector == null ? (0, _extends2.default)({}, options, {\n            __collector: createBlobCollector(options.blobId)\n          }) : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _$$_REQUIRE(_dependencyMap[7], \"./BlobRegistry\").unregister(blobId);\n\n        if (_$$_REQUIRE(_dependencyMap[7], \"./BlobRegistry\").has(blobId)) {\n          return;\n        }\n\n        _NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n\n        _NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n    return BlobManager;\n  }();\n\n  BlobManager.isAvailable = !!_NativeBlobModule.default;\n  module.exports = BlobManager;\n});","lineCount":133,"map":[[2,0,11,0],[10,0,17,0],[12,0,18,0],[14,0,27,0],[14,11,27,9,"uuidv4"],[14,17,27,0],[14,20,27,26],[15,0,28,2],[15,11,28,9],[15,50,28,48,"replace"],[15,57,28,9],[15,58,28,56],[15,65,28,9],[15,67,28,65],[15,77,28,65,"c"],[15,78,28,66],[15,80,28,70],[16,0,29,4],[16,10,29,10,"r"],[16,11,29,11],[16,14,29,15,"Math"],[16,18,29,19],[16,19,29,20,"random"],[16,25,29,15],[16,30,29,31],[16,32,29,14],[16,35,29,37],[16,36,29,4],[17,0,29,4],[17,10,30,6,"v"],[17,11,30,7],[17,14,30,10,"c"],[17,15,30,11],[17,19,30,15],[17,22,30,10],[17,25,30,21,"r"],[17,26,30,10],[17,29,30,26,"r"],[17,30,30,27],[17,33,30,30],[17,36,30,25],[17,39,30,37],[17,42,29,4],[18,0,31,4],[18,13,31,11,"v"],[18,14,31,12],[18,15,31,13,"toString"],[18,23,31,11],[18,24,31,22],[18,26,31,11],[18,27,31,4],[19,0,32,3],[19,5,28,9],[19,6,28,2],[20,0,33,1],[22,0,42,0],[22,11,42,9,"createBlobCollector"],[22,30,42,0],[22,31,42,29,"blobId"],[22,37,42,0],[22,39,42,67],[23,0,43,2],[23,8,43,6,"global"],[23,14,43,12],[23,15,43,13,"__blobCollectorProvider"],[23,38,43,6],[23,42,43,40],[23,46,43,2],[23,48,43,46],[24,0,44,4],[24,13,44,11],[24,17,44,4],[25,0,45,3],[25,5,43,2],[25,11,45,9],[26,0,46,4],[26,13,46,11,"global"],[26,19,46,17],[26,20,46,18,"__blobCollectorProvider"],[26,43,46,11],[26,44,46,42,"blobId"],[26,50,46,11],[26,51,46,4],[27,0,47,3],[28,0,48,1],[30,6,53,6,"BlobManager"],[30,17],[37,13,62,2],[37,38,63,4,"parts"],[37,43,62,2],[37,45,64,4,"options"],[37,52,62,2],[37,54,65,10],[38,0,66,4],[38,32,66,14,"NativeBlobModule"],[38,57,66,4],[38,59,66,32],[38,91,66,4],[39,0,68,4],[39,12,68,10,"blobId"],[39,18,68,16],[39,21,68,19,"uuidv4"],[39,27,68,25],[39,29,68,4],[40,0,69,4],[40,12,69,10,"items"],[40,17,69,15],[40,20,69,18,"parts"],[40,25,69,23],[40,26,69,24,"map"],[40,29,69,18],[40,30,69,28],[40,40,69,28,"part"],[40,44,69,32],[40,46,69,36],[41,0,70,6],[41,14,71,8,"part"],[41,18,71,12],[41,30,71,24,"ArrayBuffer"],[41,41,71,8],[41,45,72,9,"global"],[41,51,72,15],[41,52,72,16,"ArrayBufferView"],[41,67,72,9],[41,71,72,35,"part"],[41,75,72,39],[41,87,72,51,"global"],[41,93,72,57],[41,94,72,58,"ArrayBufferView"],[41,109,70,6],[41,111,73,8],[42,0,74,8],[42,18,74,14],[42,22,74,18,"Error"],[42,27,74,14],[42,28,75,10],[42,103,74,14],[42,104,74,8],[43,0,77,7],[45,0,78,6],[45,14,78,10,"part"],[45,18,78,14],[45,70,78,6],[45,72,78,32],[46,0,79,8],[46,19,79,15],[47,0,80,10,"data"],[47,14,80,10,"data"],[47,18,80,14],[47,20,80,16,"part"],[47,24,80,20],[47,25,80,21,"data"],[47,29,79,15],[48,0,81,10,"type"],[48,14,81,10,"type"],[48,18,81,14],[48,20,81,16],[49,0,79,15],[49,13,79,8],[50,0,83,7],[50,11,78,6],[50,17,83,13],[51,0,84,8],[51,19,84,15],[52,0,85,10,"data"],[52,14,85,10,"data"],[52,18,85,14],[52,20,85,16,"String"],[52,26,85,22],[52,27,85,23,"part"],[52,31,85,22],[52,32,84,15],[53,0,86,10,"type"],[53,14,86,10,"type"],[53,18,86,14],[53,20,86,16],[54,0,84,15],[54,13,84,8],[55,0,88,7],[56,0,89,5],[56,9,69,18],[56,10,69,4],[57,0,90,4],[57,12,90,10,"size"],[57,16,90,14],[57,19,90,17,"items"],[57,24,90,22],[57,25,90,23,"reduce"],[57,31,90,17],[57,32,90,30],[57,42,90,31,"acc"],[57,45,90,30],[57,47,90,36,"curr"],[57,51,90,30],[57,53,90,45],[58,0,91,6],[58,14,91,10,"curr"],[58,18,91,14],[58,19,91,15,"type"],[58,23,91,10],[58,28,91,24],[58,36,91,6],[58,38,91,34],[59,0,92,8],[59,19,92,15,"acc"],[59,22,92,18],[59,25,92,21,"global"],[59,31,92,27],[59,32,92,28,"unescape"],[59,40,92,21],[59,41,92,37,"encodeURI"],[59,50,92,46],[59,51,92,47,"curr"],[59,55,92,51],[59,56,92,52,"data"],[59,60,92,46],[59,61,92,21],[59,63,92,59,"length"],[59,69,92,8],[60,0,93,7],[60,11,91,6],[60,17,93,13],[61,0,94,8],[61,19,94,15,"acc"],[61,22,94,18],[61,25,94,21,"curr"],[61,29,94,25],[61,30,94,26,"data"],[61,34,94,21],[61,35,94,31,"size"],[61,39,94,8],[62,0,95,7],[63,0,96,5],[63,9,90,17],[63,11,96,7],[63,12,90,17],[63,13,90,4],[65,0,98,4,"NativeBlobModule"],[65,34,98,21,"createFromParts"],[65,49,98,4],[65,50,98,37,"items"],[65,55,98,4],[65,57,98,44,"blobId"],[65,63,98,4],[67,0,100,4],[67,15,100,11,"BlobManager"],[67,26,100,22],[67,27,100,23,"createFromOptions"],[67,44,100,11],[67,45,100,41],[68,0,101,6,"blobId"],[68,10,101,6,"blobId"],[68,16,101,12],[68,18,101,6,"blobId"],[68,24,100,41],[69,0,102,6,"offset"],[69,10,102,6,"offset"],[69,16,102,12],[69,18,102,14],[69,19,100,41],[70,0,103,6,"size"],[70,10,103,6,"size"],[70,14,103,10],[70,16,103,6,"size"],[70,20,100,41],[71,0,104,6,"type"],[71,10,104,6,"type"],[71,14,104,10],[71,16,104,12,"options"],[71,23,104,19],[71,26,104,22,"options"],[71,33,104,29],[71,34,104,30,"type"],[71,38,104,19],[71,41,104,37],[71,43,100,41],[72,0,105,6,"lastModified"],[72,10,105,6,"lastModified"],[72,22,105,18],[72,24,105,20,"options"],[72,31,105,27],[72,34,105,30,"options"],[72,41,105,37],[72,42,105,38,"lastModified"],[72,54,105,27],[72,57,105,53,"Date"],[72,61,105,57],[72,62,105,58,"now"],[72,65,105,53],[73,0,100,41],[73,9,100,11],[73,10,100,4],[74,0,107,3],[77,13,113,2],[77,40,113,27,"options"],[77,47,113,2],[77,49,113,52],[78,0,114,4],[78,57,114,17,"register"],[78,65,114,4],[78,66,114,26,"options"],[78,73,114,33],[78,74,114,34,"blobId"],[78,80,114,4],[80,0,115,4],[80,15,115,11],[80,38,115,25,"Object"],[80,44,115,31],[80,45,115,32,"create"],[80,51,115,25],[80,52,115,39],[80,93,115,44,"prototype"],[80,102,115,25],[80,103,115,11],[80,105,115,56],[81,0,116,6,"data"],[81,10,116,6,"data"],[81,14,116,10],[81,16,120,8,"options"],[81,23,120,15],[81,24,120,16,"__collector"],[81,35,120,8],[81,39,120,31],[81,43,120,8],[81,73,122,17,"options"],[81,80,120,8],[82,0,123,14,"__collector"],[82,12,123,14,"__collector"],[82,23,123,25],[82,25,123,27,"createBlobCollector"],[82,44,123,46],[82,45,123,47,"options"],[82,52,123,54],[82,53,123,55,"blobId"],[82,59,123,46],[83,0,120,8],[83,15,125,12,"options"],[84,0,115,56],[84,9,115,11],[84,10,115,4],[85,0,127,3],[88,13,132,2],[88,30,132,17,"blobId"],[88,36,132,2],[88,38,132,39],[89,0,133,4],[89,32,133,14,"NativeBlobModule"],[89,57,133,4],[89,59,133,32],[89,91,133,4],[91,0,135,4],[91,57,135,17,"unregister"],[91,67,135,4],[91,68,135,28,"blobId"],[91,74,135,4],[93,0,136,4],[93,12,136,8],[93,61,136,21,"has"],[93,64,136,8],[93,65,136,25,"blobId"],[93,71,136,8],[93,72,136,4],[93,74,136,34],[94,0,137,6],[95,0,138,5],[97,0,139,4,"NativeBlobModule"],[97,34,139,21,"release"],[97,41,139,4],[97,42,139,29,"blobId"],[97,48,139,4],[98,0,140,3],[101,13,146,2],[101,45,146,38],[102,0,147,4],[102,32,147,14,"NativeBlobModule"],[102,57,147,4],[102,59,147,32],[102,91,147,4],[104,0,149,4,"NativeBlobModule"],[104,34,149,21,"addNetworkingHandler"],[104,54,149,4],[105,0,150,3],[108,13,156,2],[108,42,156,29,"socketId"],[108,50,156,2],[108,52,156,53],[109,0,157,4],[109,32,157,14,"NativeBlobModule"],[109,57,157,4],[109,59,157,32],[109,91,157,4],[111,0,159,4,"NativeBlobModule"],[111,34,159,21,"addWebSocketHandler"],[111,53,159,4],[111,54,159,41,"socketId"],[111,62,159,4],[112,0,160,3],[115,13,166,2],[115,45,166,32,"socketId"],[115,53,166,2],[115,55,166,56],[116,0,167,4],[116,32,167,14,"NativeBlobModule"],[116,57,167,4],[116,59,167,32],[116,91,167,4],[118,0,169,4,"NativeBlobModule"],[118,34,169,21,"removeWebSocketHandler"],[118,56,169,4],[118,57,169,44,"socketId"],[118,65,169,4],[119,0,170,3],[122,13,175,2],[122,37,175,24,"blob"],[122,41,175,2],[122,43,175,36,"socketId"],[122,51,175,2],[122,53,175,60],[123,0,176,4],[123,32,176,14,"NativeBlobModule"],[123,57,176,4],[123,59,176,32],[123,91,176,4],[125,0,178,4,"NativeBlobModule"],[125,34,178,21,"sendOverSocket"],[125,48,178,4],[125,49,178,36,"blob"],[125,53,178,40],[125,54,178,41,"data"],[125,58,178,4],[125,60,178,47,"socketId"],[125,68,178,4],[126,0,179,3],[131,0,53,6,"BlobManager"],[131,2,53,6,"BlobManager"],[131,13],[131,14,57,9,"isAvailable"],[131,25],[131,28,57,32],[131,29,57,33],[131,30,57,34,"NativeBlobModule"],[131,55],[132,0,182,0,"module"],[132,2,182,0,"module"],[132,8,182,6],[132,9,182,7,"exports"],[132,16,182,0],[132,19,182,17,"BlobManager"],[132,30,182,0]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;AC0B;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDoB;8BEC;KFM;GDW;EIM;GJc;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"}},"type":"js/module"}]}